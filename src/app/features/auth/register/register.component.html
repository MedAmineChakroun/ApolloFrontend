<auth-navbar></auth-navbar>
<div class="bg-surface-50 dark:bg-surface-950 flex items-center justify-center min-h-screen min-w-[100vw] overflow-hidden p-4 pt-16">
    <div class="flex flex-col md:flex-row w-full max-w-7xl bg-surface-0 dark:bg-surface-900 shadow-lg rounded-xl overflow-hidden my-8">
        <!-- Left Column: Branding and Welcome Section -->
        <div class="w-full md:w-2/5 p-8 flex flex-col justify-center items-center" style="background-color: #001219">
            <img class="w-24 mb-8" src="assets/general/ApolloLogo.PNG" alt="Apollo Logo" />
            <h1 class="text-3xl font-bold mb-4 text-center text-white">Bienvenue sur Apollo Store !</h1>
            <p class="text-lg mb-6 text-center text-gray-300">Créez un compte pour commencer à faire vos achats avec nous.</p>
            <div class="w-full max-w-sm">
                <div class="space-y-6">
                    <div class="flex items-start space-x-4 p-4 rounded-lg transition-all duration-300 hover:bg-black/20" style="background-color: rgba(4, 15, 22, 0.6)">
                        <div class="flex-shrink-0">
                            <i class="pi pi-bolt text-2xl text-yellow-500"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-medium mb-1">Paiement rapide</h4>
                            <p class="text-gray-400 text-sm">Enregistrez vos informations pour des achats rapides et faciles</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4 p-4 rounded-lg transition-all duration-300 hover:bg-black/20" style="background-color: rgba(4, 15, 22, 0.6)">
                        <div class="flex-shrink-0">
                            <i class="pi pi-map-marker text-2xl text-blue-500"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-medium mb-1">Suivi de commande</h4>
                            <p class="text-gray-400 text-sm">Mises à jour en temps réel sur le statut de votre commande</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-4 p-4 rounded-lg transition-all duration-300 hover:bg-black/20" style="background-color: rgba(4, 15, 22, 0.6)">
                        <div class="flex-shrink-0">
                            <i class="pi pi-tag text-2xl text-green-500"></i>
                        </div>
                        <div>
                            <h4 class="text-white font-medium mb-1">Offres exclusives</h4>
                            <p class="text-gray-400 text-sm">Accédez à des offres spéciales et des promotions</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column: Registration Form - Modified to show individual error messages -->
        <div class="w-full md:w-3/5 p-8 overflow-y-auto" style="max-height: 90vh">
            <h2 class="text-surface-900 dark:text-surface-0 text-2xl font-medium mb-6">Créer votre compte</h2>

            <div class="p-fluid">
                <!-- Section Informations du compte -->
                <div class="mb-5">
                    <div class="text-surface-900 dark:text-surface-0 text-lg font-medium mb-3">Informations du compte</div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="field">
                            <label for="name" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Nom d'utilisateur*</label>
                            <input pInputText id="name" type="text" placeholder="Choisissez un nom d'utilisateur" class="w-full" [(ngModel)]="registerDto.name" minlength="6" maxlength="69" required />
                            <small *ngIf="usernameError" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Le nom ne doit pas contenir de caractères spéciaux </small>
                            <small *ngIf="nameRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Le nom est requis </small>
                        </div>
                        <div class="field">
                            <label for="email" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Email*</label>
                            <input pInputText id="email" type="email" placeholder="Adresse e-mail" class="w-full" [(ngModel)]="registerDto.email" required />
                            <small *ngIf="emailRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>L'e-mail est requis </small>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-3">
                        <div class="field">
                            <label for="password" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Mot de passe*</label>
                            <p-password id="password" [(ngModel)]="registerDto.password" placeholder="Créer un mot de passe" [toggleMask]="true" styleClass="w-full" [feedback]="true" required></p-password>
                            <small *ngIf="passwordRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Le mot de passe est requis </small>
                        </div>
                        <div class="field">
                            <label for="confirmPassword" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Confirmer le mot de passe*</label>
                            <p-password id="confirmPassword" [(ngModel)]="registerDto.confirmPassword" placeholder="Confirmez votre mot de passe" [toggleMask]="true" styleClass="w-full" [feedback]="false" required></p-password>
                            <small *ngIf="passwordMismatch" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Veuillez confirmer votre mot de passe </small>
                        </div>
                    </div>
                </div>

                <!-- Section Informations de contact -->
                <div class="mb-5">
                    <div class="text-surface-900 dark:text-surface-0 text-lg font-medium mb-3">Informations de contact</div>
                    <div class="field mb-3">
                        <label for="phone" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Numéro de téléphone*</label>
                        <div class="flex gap-2">
                            <p-dropdown [options]="countryCodes" [(ngModel)]="selectedCountryCode" optionLabel="name" [style]="{ width: '200px' }" placeholder="Select Country" [showClear]="false" (onChange)="onCountryCodeChange()">
                                <ng-template pTemplate="selectedItem">
                                    <div class="flex align-items-center gap-2" *ngIf="selectedCountryCode">
                                        <span>{{ selectedCountryCode.dialCode }}</span>
                                        <span>{{ selectedCountryCode.name }}</span>
                                    </div>
                                </ng-template>
                                <ng-template let-country pTemplate="item">
                                    <div class="flex align-items-center gap-2">
                                        <span>{{ country.dialCode }}</span>
                                        <span>{{ country.name }}</span>
                                    </div>
                                </ng-template>
                            </p-dropdown>
                            <p-inputMask id="phone" [mask]="getPhoneMaskPattern()" [(ngModel)]="phoneNumber" placeholder="Enter phone number" styleClass="flex-1" [style]="{ width: '100%' }" [unmask]="true" required> </p-inputMask>
                        </div>
                        <small class="text-surface-600 dark:text-surface-400 block mt-1">Sélectionnez votre indicatif pays, puis saisissez votre numéro de téléphone</small>
                        <small *ngIf="phoneRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Le numéro de téléphone est requis </small>
                    </div>
                </div>

                <!-- Section Adresse -->
                <div class="mb-5">
                    <div class="text-surface-900 dark:text-surface-0 text-lg font-medium mb-3">Adresse de livraison</div>
                    <div class="field mb-3">
                        <label for="address" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Adresse*</label>
                        <input pInputText id="address" type="text" placeholder="123 rue Principale" class="w-full" [(ngModel)]="registerDto.address" required />
                        <small *ngIf="addressRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>L'adresse est requise </small>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="field">
                            <label for="city" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Ville*</label>
                            <input pInputText id="city" type="text" placeholder="Votre ville" class="w-full" [(ngModel)]="registerDto.city" required />
                            <small *ngIf="cityRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>La ville est requise </small>
                        </div>
                        <div class="field">
                            <label for="postalCode" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Code postal*</label>
                            <input pInputText id="postalCode" type="text" placeholder="Code postal" class="w-full" [(ngModel)]="registerDto.postalCode" required />
                            <small *ngIf="postalCodeRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Le code postal est requis </small>
                        </div>
                        <div class="field">
                            <label for="country" class="block text-surface-900 dark:text-surface-0 text-sm font-medium mb-2">Pays*</label>
                            <input pInputText id="country" type="text" placeholder="Entrez votre pays" class="w-full" [(ngModel)]="registerDto.country" required />
                            <small *ngIf="countryRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Le pays est requis </small>
                        </div>
                    </div>
                </div>

                <!-- Conditions générales -->
                <div class="field-checkbox mb-4">
                    <p-checkbox id="agreeTerms" [(ngModel)]="registerDto.agreeTerms" [binary]="true" required></p-checkbox>
                    <label for="agreeTerms" class="ml-2 text-surface-700 dark:text-surface-300"
                        >J'accepte les <a (click)="openTermsConditions()" class="text-primary font-medium">Conditions d'utilisation</a> et la <a (click)="openTermsConditions()" class="text-primary font-medium">Politique de confidentialité</a></label
                    >
                    <small *ngIf="termsRequired" class="p-error block mt-1"> <i class="pi pi-exclamation-circle mr-1"></i>Vous devez accepter les conditions d'utilisation </small>
                </div>

                <!-- Boutons et navigation -->
                <p-button (click)="register()" [disabled]="loading" label="Créer un compte" styleClass="w-full mb-4" severity="success" raised></p-button>

                <p style="text-align: center">Vous avez déjà un compte ? <a class="font-medium no-underline ml-2 text-right cursor-pointer text-primary" routerLink="/auth/login">Se connecter</a></p>
            </div>
        </div>
    </div>
</div>
