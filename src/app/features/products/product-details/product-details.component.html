<div class="product-details-container p-4">
    <div *ngIf="product" class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Product Image -->
        <div class="product-image">
            <img [src]="product.artImageUrl" [alt]="product.artIntitule" class="w-full h-auto rounded-lg shadow-lg" (error)="handleProductImageError($event)" />
        </div>

        <!-- Product Info -->
        <div class="product-info">
            <h1 class="text-3xl font-bold mb-4">{{ product.artIntitule }}</h1>
            <p class="text-gray-600 mb-4">{{ product.artFamille }}</p>

            <div class="flex items-center gap-4 mb-6">
                <span class="text-2xl font-bold text-primary">{{ product.artPrixVente | currency: 'TND' : 'symbol' : '1.2-2' }}</span>
                <p-tag [value]="getStockStatus(product.artEtat)" [severity]="getStockSeverity(product.artEtat)"> </p-tag>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Product Details</h2>
                <p class="text-gray-700">{{ product.artIntitule || 'No description available.' }}</p>
            </div>

            <div class="mb-6">
                <h2 class="text-xl font-semibold mb-2">Stock Information</h2>
                <p class="text-gray-700">Available Quantity: {{ product.artEtat }}</p>
            </div>

            <div class="flex flex-col gap-4">
                <p-button label="Add to Cart" icon="pi pi-shopping-cart" [disabled]="isOutOfStock(product.artEtat)" (onClick)="addToCart(product)" styleClass="w-full" pRipple> </p-button>
            </div>
        </div>
    </div>

    <div *ngIf="!product && !error" class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Skeleton for Image -->
        <div class="product-image">
            <p-skeleton height="500px" styleClass="rounded-lg"></p-skeleton>
        </div>

        <!-- Skeleton for Info -->
        <div class="product-info">
            <p-skeleton width="80%" height="2rem" styleClass="mb-4"></p-skeleton>
            <p-skeleton width="60%" height="1.5rem" styleClass="mb-4"></p-skeleton>

            <div class="flex items-center gap-4 mb-6">
                <p-skeleton width="40%" height="2rem"></p-skeleton>
                <p-skeleton width="30%" height="1.5rem"></p-skeleton>
            </div>

            <div class="mb-6">
                <p-skeleton width="60%" height="1.5rem" styleClass="mb-2"></p-skeleton>
                <p-skeleton width="100%" height="4rem"></p-skeleton>
            </div>

            <div class="mb-6">
                <p-skeleton width="60%" height="1.5rem" styleClass="mb-2"></p-skeleton>
                <p-skeleton width="40%" height="1.5rem"></p-skeleton>
            </div>

            <div class="flex flex-col gap-4">
                <p-skeleton height="3rem"></p-skeleton>
                <p-skeleton height="3rem"></p-skeleton>
            </div>
        </div>
    </div>

    <div *ngIf="error" class="text-center py-8">
        <i class="pi pi-exclamation-triangle text-4xl text-red-500 mb-4"></i>
        <p class="text-xl text-red-500 mb-4">{{ error }}</p>
        <p-button label="Back to Products" icon="pi pi-arrow-left" routerLink="/store/products" styleClass="p-button-outlined"> </p-button>
    </div>
</div>
