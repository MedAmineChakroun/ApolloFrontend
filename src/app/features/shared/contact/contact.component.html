<div class="contact-container">
    <div class="contact-background-decoration"></div>

    <p-card styleClass="shadow-lg p-4 contact-card">
        <ng-template pTemplate="header">
            <div class="text-center">
                <div class="contact-icon-container">
                    <i class="pi pi-comments text-3xl"></i>
                </div>
                <h2 class="text-3xl font-bold gradient-text">Contactez-nous !</h2>
            </div>
        </ng-template>

        <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
            <!-- Email Field -->
            <div class="field mb-4 input-group">
                <label for="email" class="block text-900 font-medium mb-2"> <i class="pi pi-envelope input-icon"></i> Email </label>
                <span class="p-input-icon-left w-full">
                    <input
                        id="email"
                        type="email"
                        pInputText
                        formControlName="email"
                        class="w-full"
                        placeholder="votre.email@exemple.com"
                        [ngClass]="{ 'ng-invalid ng-dirty': contactForm.get('email')?.invalid && contactForm.get('email')?.touched }"
                    />
                </span>
                <small *ngIf="contactForm.get('email')?.invalid && contactForm.get('email')?.touched" class="p-error"> <i class="pi pi-exclamation-circle"></i> Veuillez saisir une adresse email valide </small>
            </div>

            <!-- Subject Field -->
            <div class="field mb-4 input-group">
                <label for="subject" class="block text-900 font-medium mb-2"> <i class="pi pi-tag input-icon"></i> Sujet </label>
                <span class="p-input-icon-left w-full">
                    <input
                        id="subject"
                        type="text"
                        pInputText
                        formControlName="subject"
                        class="w-full"
                        placeholder="Comment pouvons-nous vous aider ?"
                        [ngClass]="{ 'ng-invalid ng-dirty': contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched }"
                    />
                </span>
                <small *ngIf="contactForm.get('subject')?.invalid && contactForm.get('subject')?.touched" class="p-error"> <i class="pi pi-exclamation-circle"></i> Le sujet est requis </small>
            </div>

            <!-- Message Field -->
            <div class="field mb-4 input-group">
                <label for="message" class="block text-900 font-medium mb-2"> <i class="pi pi-comment input-icon"></i> Message </label>

                <textarea
                    id="message"
                    formControlName="message"
                    pTextarea
                    placeholder="Votre message"
                    [autoResize]="true"
                    rows="5"
                    cols="30"
                    class="w-full"
                    placeholder="Dites-nous comment nous pouvons vous aider..."
                    [ngClass]="{ 'ng-invalid ng-dirty': contactForm.get('message')?.invalid && contactForm.get('message')?.touched }"
                ></textarea>
                <small *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched" class="p-error"> <i class="pi pi-exclamation-circle"></i> Le message est requis </small>
            </div>

            <!-- Submit Section -->
            <div class="form-footer mt-5">
                <div class="send-button-container">
                    <p-button severity="success" type="submit" [label]="loading ? 'Envoi en cours...' : 'Envoyer le message'" icon="pi pi-send" [disabled]="contactForm.invalid || loading" styleClass="w-full send-button"></p-button>

                    <div *ngIf="loading" class="loading-spinner">
                        <i class="pi pi-spinner pi-spin"></i>
                    </div>
                </div>

                <!-- Social Media Links -->
                <div class="social-links mt-4">
                    <a href="#" class="social-icon"><i class="pi pi-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="pi pi-facebook"></i></a>
                    <a href="#" class="social-icon"><i class="pi pi-linkedin"></i></a>
                    <a href="#" class="social-icon"><i class="pi pi-instagram"></i></a>
                </div>
            </div>
        </form>

        <ng-template pTemplate="footer">
            <div class="contact-footer">
                <div class="contact-methods">
                    <div class="contact-method">
                        <i class="pi pi-envelope-open text-xl"></i>
                        <a class="text-link" href="mailto:{{ recipientEmail }}">{{ recipientEmail }}</a>
                    </div>
                    <div class="contact-method">
                        <i class="pi pi-phone text-xl"></i>
                        <span>+216 99 039 892</span>
                    </div>
                </div>
                <div class="response-time">
                    <i class="pi pi-clock text-sm"></i>
                    <span>Nous répondons généralement sous 24h</span>
                </div>
            </div>
        </ng-template>
    </p-card>
</div>
